<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8">
  <title>Araç Kayıt</title>
  <style>
    form {
      max-width: 800px;
      margin: auto;
      padding: 20px;
      background: #f9f9f9;
      border-radius: 8px;
    }

    .form-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 15px;
    }

    label {
      width: 45%;
      font-weight: bold;
    }

    input {
      width: 45%;
      padding: 5px;
    }
  </style>
</head>

<body>

  <script>
    document.getElementById("aracForm").addEventListener("submit", function (e) {
      e.preventDefault(); // Sayfa yenilenmesini engeller

      // Bilgiler alındıktan sonra yönlendirme yapılır
      window.location.href = "kaza_raporu.html";
    });
  </script>
  <script>
    document.getElementById("aracForm").addEventListener("submit", function (e) {
      e.preventDefault();

      const arac = {
        plaka: document.getElementById("plaka").value.trim(),
        marka: document.getElementById("marka").value.trim(),
        model: document.getElementById("model").value.trim(),
        yil: document.getElementById("yil").value.trim(),
        renk: document.getElementById("renk").value.trim()
      };

      const kayitlar = JSON.parse(localStorage.getItem("aracKayitlari")) || [];
      kayitlar.push(arac);
      localStorage.setItem("aracKayitlari", JSON.stringify(kayitlar));

      window.location.href = "kaza_raporu.html";
    });
  </script>
  <div class="container">
    <h2>Kaza Ekspertiz Raporu</h2>
    <form id="aracKayitForm">
      <div class="form-row">
        <label>Servis Adı:</label>
        <input type="text" name="servisAdi">
        <label>Sigorta Şirketi:</label>
        <input type="text" name="sigortaSirketi">
      </div>

      <div class="form-row">
        <label>Ruhsat Sahibi:</label>
        <input type="text" name="ruhsatSahibi">
        <label>Poliçe No:</label>
        <input type="text" name="policeNo">
      </div>

      <div class="form-row">
        <label>Ruhsat Sahibi TC:</label>
        <input type="text" name="ruhsatTc">
        <label>Eksper Adı:</label>
        <input type="text" name="eksperAdi">
      </div>

      <div class="form-row">
        <label>Sürücü İsim:</label>
        <input type="text" name="surucuIsim">
        <label>Dosya No:</label>
        <input type="text" name="dosyaNo">
      </div>

      <div class="form-row">
        <label>Sürücü TC:</label>
        <input type="text" name="surucuTc">
        <label>Dosya Türü:</label>
        <input type="text" name="dosyaTuru">
      </div>

      <div class="form-row">
        <label>Müşteri Tel:</label>
        <input type="text" name="musteriTel">
        <label>Sigorta Bitiş:</label>
        <input type="date" name="sigortaBitis">
      </div>

      <div class="form-row">
        <label>Marka / Model:</label>
        <input type="text" name="markaModel">
        <label>Hasar Tarihi / Saati:</label>
        <input type="datetime-local" name="hasarTarihi">
      </div>

      <div class="form-row">
        <label>Model Yılı:</label>
        <input type="number" name="modelYili">
        <label>Dosya Açılış Tarihi:</label>
        <input type="date" name="dosyaAcilis">
      </div>

      <div class="form-row">
        <label>Şase No:</label>
        <input type="text" name="saseNo">
        <label>Servis Telefon:</label>
        <input type="text" name="servisTel">
      </div>

      <div class="form-row">
        <label>Motor No:</label>
        <input type="text" name="motorNo">
        <label>Servise Giriş Tarihi:</label>
        <input type="date" name="servisGiris">
      </div>

      <div class="form-row">
        <label>Kilometre:</label>
        <input type="number" name="kilometre">
        <label>Servis Çıkış Tarihi:</label>
        <input type="date" name="servisCikis">
      </div>

      <button type="submit">Kaydet</button>
    </form>
    <script>
      // Araç bilgilerini kaydet ve kaza raporuna geç
      document.getElementById("aracForm").addEventListener("submit", function (e) {
        e.preventDefault();

        const arac = {
          plaka: document.getElementById("plaka").value.trim(),
          marka: document.getElementById("marka").value.trim(),
          model: document.getElementById("model").value.trim(),
          yil: document.getElementById("yil").value.trim(),
          renk: document.getElementById("renk").value.trim()
        };

        const kayitlar = JSON.parse(localStorage.getItem("aracKayitlari")) || [];
        kayitlar.push(arac);
        localStorage.setItem("aracKayitlari", JSON.stringify(kayitlar));

        window.location.href = "kaza_raporu.html";
      });

      // Kayıtlı araçlar sayfasına geçiş
      document.getElementById("listeyeGit").addEventListener("click", function () {
        window.location.href = "kayit_listesi.html";
      });
    </script>
    <script>
      document.getElementById("aracForm").addEventListener("submit", function (e) {
        e.preventDefault();

        const aracID = Date.now(); // Benzersiz ID (timestamp)

        const arac = {
          id: aracID,
          plaka: document.getElementById("plaka").value.trim(),
          marka: document.getElementById("marka").value.trim(),
          model: document.getElementById("model").value.trim(),
          yil: document.getElementById("yil").value.trim(),
          renk: document.getElementById("renk").value.trim()
        };

        const kayitlar = JSON.parse(localStorage.getItem("aracKayitlari")) || [];
        kayitlar.push(arac);
        localStorage.setItem("aracKayitlari", JSON.stringify(kayitlar));

        // ID'yi geçici olarak sakla, kaza raporu sayfası bu ID'yi kullanacak
        localStorage.setItem("aktifAracID", aracID);

        window.location.href = "kaza_raporu.html";
      });
    </script>

</body>

</html>